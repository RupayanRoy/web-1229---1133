<!DOCTYPE html>
<html>
<head>
    <title>Parent Dashboard</title>
    <link rel="stylesheet" href="universal.css">
</head>
<body>

<header>
    <h2>Parent Dashboard</h2>
</header>

<div class="container">

    <!-- SIDEBAR -->
    <div class="sidebar">
        <a href="#">Child Profile</a>
        <a href="#">Attendance</a>
        <a href="#">Academic Progress</a>
        <a href="javascript:void(0)" onclick="logout()">Logout</a>
    </div>

    <!-- CONTENT -->
    <div class="content">

        <div class="card">
            <h3>ğŸ‘‹ Welcome, Parent</h3>
            <p>View your childâ€™s academic performance.</p>
        </div>

        <div class="card">
            <h3>Child Profile</h3>
            <p id="childInfo"></p>
        </div>

        <div class="card">
            <h3>Child Marks</h3>
            <ul id="childMarks"></ul>
        </div>

    </div>
</div>
<div class="card follow-card">
    <h3>â¤ï¸ Enjoying this website?</h3>
    <p>Follow the developer for more cool projects!</p>

    <div class="follow-buttons">
        <a href="https://www.instagram.com/itsme_rupayanroy/" target="_blank">
            ğŸ“¸ Instagram
        </a>

        <a href="https://github.com/RupayanRoy" target="_blank">
            ğŸ¦ Github
        </a>

        <a href="https://www.linkedin.com/in/rupayan-roy-88b95130a/" target="_blank">
            ğŸ’¼ LinkedIn
        </a>
    </div>
</div>

<!-- AUTH CHECK -->
<script>
const token = localStorage.getItem("token");

if (!token) {
    alert("Unauthorized access. Please login.");
    window.location.href = "login.html";
}
</script>

<!-- FETCH CHILD DATA -->
<script>
fetch("http://localhost:3000/api/child", {
    headers: {
        "Authorization": "Bearer " + localStorage.getItem("token")
    }
})
.then(res => res.json())
.then(child => {
    console.log("CHILD DATA:", child); // ğŸ‘ˆ ADD THIS
    document.getElementById("childInfo").innerHTML = `
        <strong>Username:</strong> ${child.username}<br>
        <strong>Role:</strong> student
    `;

    const list = document.getElementById("childMarks");
    list.innerHTML = "";

    for (let subject in child.marks) {
        const li = document.createElement("li");
        li.textContent = `${subject.toUpperCase()}: ${child.marks[subject]}`;
        list.appendChild(li);
    }
});
</script>

<!-- LOGOUT -->
<script>
function logout() {
    localStorage.removeItem("token");
    localStorage.removeItem("role");
    window.location.href = "login.html";
}
</script>
<!-- Chatbot Button -->
<div id="chatbot-btn" onclick="toggleChat()">ğŸ’¬</div>

<!-- Chatbot Window -->
<div id="chatbot">
    <div class="chat-header">
        AI Assistant
        <span onclick="toggleChat()">âœ–</span>
    </div>

    <div class="chat-body" id="chatBody">
        <div class="bot">ğŸ‘‹ Hi! How can I help you?</div>
    </div>

    <div class="chat-input">
        <input type="text" id="chatInput" placeholder="Ask me anything..." />
        <button onclick="sendMessage()">Send</button>
    </div>
</div>
<script src="chatbot.js"></script>
<div class="credit-bar">
  <div class="credit-track">
    ğŸ‘‹ This website is developed by <b>Rupayan Roy</b> &nbsp;|&nbsp;
    ğŸ¨ Designed by <b>Monalisa Das Roy</b>
    &nbsp;&nbsp;&nbsp;â€¢&nbsp;&nbsp;&nbsp;
    ğŸ‘‹ This website is developed by <b>Rupayan Roy</b> &nbsp;|&nbsp;
    ğŸ¨ Designed by <b>Monalisa Das </b>
  </div>
</div>
</body>
</html>
